@startuml 商品管理システムドメインモデル（完全版 修正版）
skinparam componentStyle rectangle

' =====================
' 販売システム
' =====================
[ユーザー] o-- [ユーザーID]
[ユーザー] o-- [ユーザー名]
[ユーザー] o-- [住所]
[ユーザー] o-- [電話番号]
[ユーザー] o-- [メールアドレス]
[ユーザー] o-- [支払情報]
[ユーザー] o-- [カート]
[ユーザー] o-- [パスワード]


[カート] o-- [カートID]
[カート] o-- [ユーザーID]
[カート] o-- [カート商品]

[カート商品] o-- [数量]
[カート商品] o-- [小計]
[カート商品] *-- [商品]

[支払情報] o-- [支払情報ID]
[支払情報] o-- [支払方法]
[支払情報] o-- [支払金額]
[支払情報] o-- [支払日]

' =====================
' 管理システム
' =====================
[管理者] o-- [管理者ID]
[管理者] o-- [管理者氏名]
[管理者] o-- [管理履歴]

[管理履歴] o-- [管理履歴ID]

[決済ログ] o-- [決済ID]
[決済ログ] o-- [ユーザーID]
[決済ログ] o-- [注文ID]
[決済ログ] o-- [決済方法]
[決済ログ] o-- [決済金額]
[決済ログ] o-- [決済日]

' =====================
' 共通システム
' =====================
[商品] o-- [商品ID]
[商品] o-- [商品名]
[商品] o-- [商品説明]
[商品] o-- [価格]
[商品] o-- [在庫数]
[商品] o-- [カテゴリ]

[注文] o-- [注文ID]
[注文] o-- [ユーザーID]
[注文] o-- [注文日]
[注文] o-- [配送料]
[注文] o-- [合計金額]
[注文] o-- [注文詳細]
[注文] o-- [発送]

[注文詳細] o-- [注文詳細ID]
[注文詳細] o-- [数量]
[注文詳細] o-- [小計]
[注文詳細] o-- [商品]

[発送] o-- [発送ID]
[発送] o-- [配送業者]

[配送] o-- [追跡番号]
[配送] o-- [発送日]
[配送] o-- [到着予定日]

[配送] o-- [注文]

[返品] o-- [返品ID]
[返品] o-- [注文詳細]
[返品] o-- [返品日]
[返品] o-- [返品理由]
[返品] o-- [返品状態]

[返品] o-- [決済ID]
[返品] o-- [返金金額]
[返品] o-- [返金日]
[返品] o-- [返金方法]
[返品] o-- [返金状態]

' 返金状態は子のみ
[返金申請中] -up-|> [返金状態]
[返金承認済み] -up-|> [返金状態]
[返金却下済み] -up-|> [返金状態]
[返金完了] -up-|> [返金状態]

' 返品状態は子のみ
[返品申請中] -up-|> [返品状態]
[返品承認済み] -up-|> [返品状態]
[返品却下済み] -up-|> [返品状態]
[返品完了] -up-|> [返品状態]

@enduml
